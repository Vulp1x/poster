{"openapi":"3.0.3","info":{"title":"REST api for simple route app","version":"1.0"},"servers":[{"url":"http://localhost:80","description":"Default server for rest-api"}],"paths":{"/api/admin/driver":{"post":{"tags":["admin_service"],"summary":"add_manager admin_service","description":"admins could add drivers from main system","operationId":"admin_service#add_manager","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddManagerRequestBody"},"example":{"login":"Ipsum sunt ab distinctio.","password":"bjc"}}}},"responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Blanditiis ex alias."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"string","example":"Ex ipsa."}}}},"403":{"description":"invalid-scopes: Forbidden response.","content":{"application/json":{"schema":{"type":"string","example":"Consequuntur delectus aut."}}}},"404":{"description":"user not found: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Quia rem nostrum sint dolorum."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/admin/driver/{manager_id}":{"delete":{"tags":["admin_service"],"summary":"drop_manager admin_service","description":"admins could delete managers from main system","operationId":"admin_service#drop_manager","parameters":[{"name":"manager_id","in":"path","description":"id менеджера, которого необходимо удалить","required":true,"schema":{"type":"string","description":"id менеджера, которого необходимо удалить","example":"773F4E7F-A748-DF6D-4355-233071D2534A","format":"uuid"},"example":"5E3B665E-1239-9C12-9643-FFC1E6C04697"}],"responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Qui libero."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"string","example":"Fuga quas nisi sapiente."}}}},"403":{"description":"invalid-scopes: Forbidden response.","content":{"application/json":{"schema":{"type":"string","example":"Dolores laboriosam vel velit doloremque."}}}},"404":{"description":"user not found: Not Found response.","content":{"application/json":{}}},"500":{"description":"Internal Server Error response."}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/profile":{"get":{"tags":["auth_service"],"summary":"profile auth_service","description":"get user profile","operationId":"auth_service#profile","responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Cupiditate eaque dolorem quos."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{}}},"404":{"description":"user not found: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Assumenda nostrum et et ea blanditiis."}}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Facilis fugiat similique ab sint voluptatum aspernatur."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/signin":{"post":{"tags":["auth_service"],"summary":"signin auth_service","description":"Creates a valid JWT","operationId":"auth_service#signin","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Creds"},"example":{"jwt":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ"}}}},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Assumenda consequatur vel repellendus et pariatur."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"string","example":"Consectetur quam eius."}}}},"404":{"description":"user not found: Not Found response.","content":{"application/json":{"schema":{"type":"string","example":"Ratione quas molestias quaerat corporis."}}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Nam qui quibusdam in pariatur."}}}}},"security":[{"basic_header_Authorization":[]}]}},"/api/tasks/":{"get":{"tags":["tasks_service"],"summary":"list tasks tasks_service","description":"получить все задачи для текущего пользователя","operationId":"tasks_service#list tasks","responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Eaque qui non omnis magnam."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Ut cum sint beatae commodi omnis explicabo."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/tasks/draft":{"post":{"tags":["tasks_service"],"summary":"create task draft tasks_service","description":"создать драфт задачи","operationId":"tasks_service#create task draft","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskDraftRequestBody"},"example":{"post_image":"Optio animi magnam suscipit doloremque.","text_template":"Veritatis esse earum aliquid rerum.","title":"Illo aut non sint alias."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"string","description":"task_id для созданной задачи","example":"74C53540-E974-ABFF-2565-6BF99F9017B2","format":"uuid"},"example":"1265498D-5A84-134A-1C7A-ED5B4B92788E"}}},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Facere natus."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"string","description":"task_id для созданной задачи","example":"2C91774A-6D4A-67B6-DC43-6AED849DACC1","format":"uuid"}}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{"schema":{"type":"string","description":"task_id для созданной задачи","example":"FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE","format":"uuid"}}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Aut perspiciatis error sit ea dicta vel."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/tasks/{task_id}/":{"get":{"tags":["tasks_service"],"summary":"get task tasks_service","description":"получить задачу по id","operationId":"tasks_service#get task","parameters":[{"name":"task_id","in":"path","description":"id задачи","required":true,"schema":{"type":"string","description":"id задачи","example":"Expedita in quis dolores."},"example":"Voluptatem aut commodi."}],"responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Placeat est dolore perferendis."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Accusantium quo maxime."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/tasks/{task_id}/start":{"post":{"tags":["tasks_service"],"summary":"start task tasks_service","description":"начать выполнение задачи ","operationId":"tasks_service#start task","parameters":[{"name":"task_id","in":"path","description":"id задачи","required":true,"schema":{"type":"string","description":"id задачи","example":"Qui sint animi ipsa qui a."},"example":"Ad architecto aliquid."}],"responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Eum laboriosam qui velit eum."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/tasks/{task_id}/stop":{"post":{"tags":["tasks_service"],"summary":"stop task tasks_service","description":"остановить выполнение задачи ","operationId":"tasks_service#stop task","parameters":[{"name":"task_id","in":"path","description":"id задачи","required":true,"schema":{"type":"string","description":"id задачи","example":"Dolor doloremque."},"example":"Voluptatem doloremque."}],"responses":{"200":{"description":"OK response."},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Est exercitationem suscipit sit nisi."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}},"/api/tasks/{task_id}/upload":{"post":{"tags":["tasks_service"],"summary":"upload file tasks_service","description":"загрузить файл с пользователями, прокси","operationId":"tasks_service#upload file","parameters":[{"name":"task_id","in":"path","description":"id задачи, в которую загружаем пользователей/прокси","required":true,"schema":{"type":"string","description":"id задачи, в которую загружаем пользователей/прокси","example":"Saepe aut impedit vitae sequi nihil."},"example":"Dignissimos at."}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UploadFileRequestBody"},"example":{"bots":[{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]}],"proxies":[{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]}],"targets":[{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]}]}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UploadError"},"example":[{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2}]},"example":[{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2}]}}},"400":{"description":"bad request: Bad Request response.","content":{"application/json":{"schema":{"type":"string","example":"Omnis voluptatem voluptas architecto."}}}},"401":{"description":"unauthorized: Unauthorized response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UploadError"},"example":[{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2}]}}}},"404":{"description":"task not found: Not Found response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UploadError"},"example":[{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2},{"input":"Necessitatibus voluptatibus porro voluptatum laboriosam molestiae.","line":6005464615987859264,"reason":"Optio consequatur ex vel nesciunt vitae corrupti.","type":2}]}}}},"500":{"description":"internal error: Internal Server Error response.","content":{"application/json":{"schema":{"type":"string","example":"Quia et omnis distinctio."}}}}},"security":[{"jwt_header_Authorization":["driver","admin"]}]}}},"components":{"schemas":{"AddManagerRequestBody":{"type":"object","properties":{"login":{"type":"string","example":"A dolor."},"password":{"type":"string","example":"iro","minLength":4}},"example":{"login":"Ab qui excepturi laborum.","password":"bas"},"required":["login","password"]},"BotAccountRecord":{"type":"object","properties":{"line_number":{"type":"integer","description":"номер строки в исходном файле","example":2840087556141586518,"format":"int64"},"record":{"type":"array","items":{"type":"string","example":"At atque labore."},"example":["Aut recusandae tenetur.","Sed nihil delectus et inventore dicta non."]}},"example":{"line_number":2235909914658340376,"record":["Voluptas vitae quia et assumenda.","Voluptas corrupti quidem."]},"required":["record","line_number"]},"CreateTaskDraftRequestBody":{"type":"object","properties":{"post_image":{"type":"string","description":"фотография для постов","example":"Dolorem eveniet perferendis."},"text_template":{"type":"string","description":"шаблон для подписи под постом","example":"Dignissimos veniam est."},"title":{"type":"string","description":"название задачи","example":"Quia est nam."}},"example":{"post_image":"Quibusdam sapiente.","text_template":"Quidem sed laudantium deleniti doloribus nihil voluptas.","title":"Ullam laboriosam maxime."},"required":["title","text_template","post_image"]},"Creds":{"type":"object","properties":{"jwt":{"type":"string","description":"JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ"}},"example":{"jwt":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ"},"required":["jwt"]},"UploadError":{"type":"object","properties":{"input":{"type":"string","description":"номер порта","example":"Quaerat voluptatem et dolore eaque qui."},"line":{"type":"integer","example":6265114283469757541,"format":"int64"},"reason":{"type":"string","example":"Asperiores est aliquam ea in et consequatur."},"type":{"type":"integer","description":" 1 - список ботов\n    2 - список прокси\n    3 - список получателей рекламы","example":1,"enum":[1,2,3]}},"example":{"input":"Voluptatem necessitatibus qui.","line":8035467953179830869,"reason":"Placeat aut.","type":1},"required":["type","line","input","reason"]},"UploadFileRequestBody":{"type":"object","properties":{"bots":{"type":"array","items":{"$ref":"#/components/schemas/BotAccountRecord"},"description":"список ботов","example":[{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]}]},"proxies":{"type":"array","items":{"$ref":"#/components/schemas/BotAccountRecord"},"description":"список проксей для использования","example":[{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]}]},"targets":{"type":"array","items":{"$ref":"#/components/schemas/BotAccountRecord"},"description":"список аккаунтов, которым показать надо рекламу","example":[{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]}]}},"example":{"bots":[{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]},{"line_number":6957168655539073176,"record":["Deserunt eum ea et.","Quia reprehenderit."]}],"proxies":[{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]},{"line_number":44191890423975802,"record":["Laudantium veniam ratione culpa non ad.","Est dolorem corporis fugit fugiat.","Quisquam itaque nisi."]}],"targets":[{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]},{"line_number":5176427869412771911,"record":["Impedit doloremque qui magni molestiae fugiat.","Excepturi eos aspernatur."]}]},"required":["bots","proxies","targets"]}},"securitySchemes":{"basic_header_Authorization":{"type":"http","description":"Basic authentication used to authenticate security principal during signin","scheme":"basic"},"jwt_header_Authorization":{"type":"http","description":"Secures endpoint by requiring a valid JWT token retrieved via the signin endpoint. Supports scopes \"api:read\" and \"api:write\".","scheme":"bearer"}}},"tags":[{"name":"admin_service","description":"The secured service exposes endpoints that require valid authorization credentials."},{"name":"auth_service","description":"The secured service exposes endpoints that require valid authorization credentials."},{"name":"tasks_service","description":"сервис для создания, редактирования и работы с задачами (рекламными компаниями)"}]}