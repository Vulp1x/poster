openapi: 3.0.3
info:
  title: REST api for simple route app
  version: "1.0"
servers:
  - url: /
    description: Default server for rest-api
paths:
  /api/admin/driver:
    post:
      tags:
        - admin_service
      summary: add_manager admin_service
      description: admins could add drivers from main system
      operationId: admin_service#add_manager
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddManagerRequestBody'
            example:
              login: Ad illo ratione rerum laborum.
              password: 6v3
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Sunt rerum saepe.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                example: Tempora ea rerum atque tempora.
        "403":
          description: 'invalid-scopes: Forbidden response.'
          content:
            application/json:
              schema:
                type: string
                example: Sit quia beatae quasi voluptatem sint.
        "404":
          description: 'user not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                example: Molestiae aspernatur autem natus et qui.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/admin/driver/{manager_id}:
    delete:
      tags:
        - admin_service
      summary: drop_manager admin_service
      description: admins could delete managers from main system
      operationId: admin_service#drop_manager
      parameters:
        - name: manager_id
          in: path
          description: id менеджера, которого необходимо удалить
          required: true
          schema:
            type: string
            description: id менеджера, которого необходимо удалить
            example: E31B6C92-4A10-2D9D-2B43-B3362900308F
            format: uuid
          example: EA2D3703-2B9D-E7C0-35B9-DB753C364369
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Architecto deleniti quis quam.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                example: Et sunt sit aut.
        "403":
          description: 'invalid-scopes: Forbidden response.'
          content:
            application/json:
              schema:
                type: string
                example: Blanditiis molestias error.
        "404":
          description: 'user not found: Not Found response.'
          content:
            application/json: {}
        "500":
          description: Internal Server Error response.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/profile:
    get:
      tags:
        - auth_service
      summary: profile auth_service
      description: get user profile
      operationId: auth_service#profile
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Dolor et et nesciunt cum molestias.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json: {}
        "404":
          description: 'user not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                example: Aut perspiciatis odio illo ducimus sed.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Minus alias error adipisci est aliquam qui.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/signin:
    post:
      tags:
        - auth_service
      summary: signin auth_service
      description: Creates a valid JWT
      operationId: auth_service#signin
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Creds'
              example:
                jwt: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Et ut culpa cumque.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                example: Culpa rem.
        "404":
          description: 'user not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                example: Atque in veniam dolore facilis necessitatibus.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Sint amet.
      security:
        - basic_header_Authorization: []
  /api/tasks/:
    get:
      tags:
        - tasks_service
      summary: list tasks tasks_service
      description: получить все задачи для текущего пользователя
      operationId: tasks_service#list tasks
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
                example:
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
              example:
                - bots_filename: Cum sint beatae commodi omnis.
                  bots_num: 5267401957530983134
                  id: 773F4E7F-A748-DF6D-4355-233071D2534A
                  image: Aliquid fuga necessitatibus dignissimos deleniti.
                  proxies_filename: Voluptatum deserunt eius sapiente.
                  proxies_num: 7905713975101806099
                  status: 9050133790756407575
                  targets_filename: Incidunt dolores.
                  targets_num: 5855138995748008358
                  text_template: Aut reprehenderit animi.
                  title: Qui non.
                - bots_filename: Cum sint beatae commodi omnis.
                  bots_num: 5267401957530983134
                  id: 773F4E7F-A748-DF6D-4355-233071D2534A
                  image: Aliquid fuga necessitatibus dignissimos deleniti.
                  proxies_filename: Voluptatum deserunt eius sapiente.
                  proxies_num: 7905713975101806099
                  status: 9050133790756407575
                  targets_filename: Incidunt dolores.
                  targets_num: 5855138995748008358
                  text_template: Aut reprehenderit animi.
                  title: Qui non.
                - bots_filename: Cum sint beatae commodi omnis.
                  bots_num: 5267401957530983134
                  id: 773F4E7F-A748-DF6D-4355-233071D2534A
                  image: Aliquid fuga necessitatibus dignissimos deleniti.
                  proxies_filename: Voluptatum deserunt eius sapiente.
                  proxies_num: 7905713975101806099
                  status: 9050133790756407575
                  targets_filename: Incidunt dolores.
                  targets_num: 5855138995748008358
                  text_template: Aut reprehenderit animi.
                  title: Qui non.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Quia inventore rerum qui quibusdam qui.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
                example:
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
                example:
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
                example:
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
                  - bots_filename: Cum sint beatae commodi omnis.
                    bots_num: 5267401957530983134
                    id: 773F4E7F-A748-DF6D-4355-233071D2534A
                    image: Aliquid fuga necessitatibus dignissimos deleniti.
                    proxies_filename: Voluptatum deserunt eius sapiente.
                    proxies_num: 7905713975101806099
                    status: 9050133790756407575
                    targets_filename: Incidunt dolores.
                    targets_num: 5855138995748008358
                    text_template: Aut reprehenderit animi.
                    title: Qui non.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/:
    get:
      tags:
        - tasks_service
      summary: get task tasks_service
      description: получить задачу по id
      operationId: tasks_service#get task
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Fuga tempora sed voluptatem ut molestiae quia.
          example: Ex pariatur quis quae voluptatibus odio nobis.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
              example:
                bots_filename: Sed incidunt nisi tempora enim.
                bots_num: 112345310045291327
                id: 2C91774A-6D4A-67B6-DC43-6AED849DACC1
                image: Fugit nihil inventore veritatis voluptatem.
                proxies_filename: Maiores dicta deserunt quas doloremque repudiandae.
                proxies_num: 4558317015290965205
                status: 196138440299557045
                targets_filename: Voluptatibus aliquid ipsam temporibus eius itaque reiciendis.
                targets_num: 4653392116943388932
                text_template: Id inventore et.
                title: Rerum maiores nostrum ratione accusantium inventore.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Tempora voluptatem quisquam ut ea.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Maiores accusamus dolorem possimus provident sint voluptates.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
    put:
      tags:
        - tasks_service
      summary: update task tasks_service
      description: |-
        обновить информацию о задаче. Не меняет статус задачи, можно вызывать сколько угодно раз.
        			Нельзя вызвать для задачи, которая уже выполняется, для этого надо сначала остановить выполнение.
      operationId: tasks_service#update task
      parameters:
        - name: task_id
          in: path
          description: id задачи, которую хотим обновить
          required: true
          schema:
            type: string
            description: id задачи, которую хотим обновить
            example: Qui et.
          example: In nesciunt ut.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTaskRequestBody'
            example:
              post_image: Qui exercitationem et mollitia.
              text_template: Eveniet praesentium.
              title: Necessitatibus et earum fuga sit ipsam.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
              example:
                bots_filename: Dolorem et porro deleniti enim ea pariatur.
                bots_num: 5537598350593640909
                id: FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE
                image: Molestiae est unde est adipisci.
                proxies_filename: Velit unde dolorem fugiat vel libero.
                proxies_num: 7232105117262478473
                status: 852655666311626326
                targets_filename: Vel eligendi.
                targets_num: 8662854942370633267
                text_template: Dolor autem.
                title: Vel incidunt sapiente temporibus cumque quasi.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Autem quaerat rerum consequatur nostrum.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Et itaque pariatur et illum itaque officia.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/assign:
    post:
      tags:
        - tasks_service
      summary: assign proxies tasks_service
      description: присвоить ботам прокси
      operationId: tasks_service#assign proxies
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Enim qui officia est earum ducimus.
          example: Doloribus et facere similique eos voluptates.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: integer
                description: количество аккаунтов с проксями, которые будут использованы для текущей задачи
                example: 9054544678714874960
                format: int64
              example: 9152231143065962117
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: integer
                description: количество аккаунтов с проксями, которые будут использованы для текущей задачи
                example: 1976415649276574112
                format: int64
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: integer
                description: количество аккаунтов с проксями, которые будут использованы для текущей задачи
                example: 1602933122019755227
                format: int64
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                type: integer
                description: количество аккаунтов с проксями, которые будут использованы для текущей задачи
                example: 5782067987925387064
                format: int64
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Repudiandae accusantium assumenda optio.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/force:
    delete:
      tags:
        - tasks_service
      summary: force delete tasks_service
      description: удалить задачу и все связанные с ней сущности. Использовать только для тестов
      operationId: tasks_service#force delete
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Natus tenetur tenetur ipsa.
          example: Voluptatem fuga magnam veritatis minus et.
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json: {}
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json: {}
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json: {}
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json: {}
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/progress:
    get:
      tags:
        - tasks_service
      summary: get progress tasks_service
      description: получить статус выполнения задачи по id
      operationId: tasks_service#get progress
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Soluta atque eligendi nemo sunt numquam enim.
          example: Vel maiores cupiditate molestiae laudantium.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BotsProgress'
                example:
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
              example:
                - posts_count: 620013996187731515
                  status: 5145210576201577970
                  user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                - posts_count: 620013996187731515
                  status: 5145210576201577970
                  user_name: Eligendi totam facilis quaerat voluptatem et dolore.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Iusto vitae voluptatum.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BotsProgress'
                example:
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BotsProgress'
                example:
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
                  - posts_count: 620013996187731515
                    status: 5145210576201577970
                    user_name: Eligendi totam facilis quaerat voluptatem et dolore.
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Occaecati illum et laborum quos natus.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/start:
    post:
      tags:
        - tasks_service
      summary: start task tasks_service
      description: 'начать выполнение задачи '
      operationId: tasks_service#start task
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Ut maiores omnis praesentium.
          example: Veniam repellendus voluptate omnis et aut.
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json: {}
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json: {}
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json: {}
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Non corrupti occaecati.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/stop:
    post:
      tags:
        - tasks_service
      summary: stop task tasks_service
      description: 'остановить выполнение задачи '
      operationId: tasks_service#stop task
      parameters:
        - name: task_id
          in: path
          description: id задачи
          required: true
          schema:
            type: string
            description: id задачи
            example: Aut aliquid rem unde.
          example: Repudiandae et amet enim aut doloremque.
      responses:
        "200":
          description: OK response.
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json: {}
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json: {}
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json: {}
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Optio eaque est explicabo laudantium quod.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/{task_id}/upload:
    post:
      tags:
        - tasks_service
      summary: upload files tasks_service
      description: загрузить файл с пользователями, прокси
      operationId: tasks_service#upload files
      parameters:
        - name: task_id
          in: path
          description: id задачи, в которую загружаем пользователей/прокси
          required: true
          schema:
            type: string
            description: id задачи, в которую загружаем пользователей/прокси
            example: Quo dignissimos.
          example: Fugit quia unde at dolorem.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadFilesRequestBody'
            example:
              bots:
                - line_number: 2669733814448064186
                  record:
                    - Omnis eius atque possimus deleniti.
                    - Sunt officia inventore.
                    - Et molestiae quam beatae quas eum.
                - line_number: 2669733814448064186
                  record:
                    - Omnis eius atque possimus deleniti.
                    - Sunt officia inventore.
                    - Et molestiae quam beatae quas eum.
                - line_number: 2669733814448064186
                  record:
                    - Omnis eius atque possimus deleniti.
                    - Sunt officia inventore.
                    - Et molestiae quam beatae quas eum.
              filenames:
                bots_filename: Ut quae dolorem similique.
                proxies_filename: Perspiciatis ea autem.
                targets_filename: Odit accusamus officia ipsum.
              proxies:
                - line_number: 2791450974304943083
                  record:
                    - Repellat ut.
                    - Inventore libero et accusantium commodi.
                    - Veniam qui.
                - line_number: 2791450974304943083
                  record:
                    - Repellat ut.
                    - Inventore libero et accusantium commodi.
                    - Veniam qui.
                - line_number: 2791450974304943083
                  record:
                    - Repellat ut.
                    - Inventore libero et accusantium commodi.
                    - Veniam qui.
                - line_number: 2791450974304943083
                  record:
                    - Repellat ut.
                    - Inventore libero et accusantium commodi.
                    - Veniam qui.
              targets:
                - line_number: 4869887685049312467
                  record:
                    - Porro sed.
                    - Molestiae voluptatem.
                - line_number: 4869887685049312467
                  record:
                    - Porro sed.
                    - Molestiae voluptatem.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UploadError'
                example:
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
              example:
                - input: Non totam labore amet.
                  line: 2244331639442316921
                  reason: Iure praesentium nihil.
                  type: 3
                - input: Non totam labore amet.
                  line: 2244331639442316921
                  reason: Iure praesentium nihil.
                  type: 3
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Iusto nemo facilis dolore voluptatum ut labore.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UploadError'
                example:
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UploadError'
                example:
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
                  - input: Non totam labore amet.
                    line: 2244331639442316921
                    reason: Iure praesentium nihil.
                    type: 3
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Voluptate enim veniam doloribus enim.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
  /api/tasks/draft:
    post:
      tags:
        - tasks_service
      summary: create task draft tasks_service
      description: создать драфт задачи
      operationId: tasks_service#create task draft
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTaskDraftRequestBody'
            example:
              post_image: Nisi adipisci voluptatem natus.
              text_template: Dolorem corporis fugit fugiat ex quisquam.
              title: Ad et.
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                description: task_id для созданной задачи
                example: D358BA94-28F1-C0F1-EA4E-E3BFBD8A6AE2
                format: uuid
              example: 9A05BD8A-CA8D-335E-C26E-14DB8FEBAB04
        "400":
          description: 'bad request: Bad Request response.'
          content:
            application/json:
              schema:
                type: string
                example: Non accusamus enim eligendi.
        "401":
          description: 'unauthorized: Unauthorized response.'
          content:
            application/json:
              schema:
                type: string
                description: task_id для созданной задачи
                example: CEF3CAF7-AB82-083A-2F08-9497BE6B7488
                format: uuid
        "404":
          description: 'task not found: Not Found response.'
          content:
            application/json:
              schema:
                type: string
                description: task_id для созданной задачи
                example: 6D98E750-AE3D-1948-4270-2B4874F82503
                format: uuid
        "500":
          description: 'internal error: Internal Server Error response.'
          content:
            application/json:
              schema:
                type: string
                example: Consectetur ut.
      security:
        - jwt_header_Authorization:
            - driver
            - admin
components:
  schemas:
    AddManagerRequestBody:
      type: object
      properties:
        login:
          type: string
          example: Ut aut et consequatur voluptas animi.
        password:
          type: string
          example: "302"
          minLength: 4
      example:
        login: Quam dolorum.
        password: cuw
      required:
        - login
        - password
    BotAccountRecord:
      type: object
      properties:
        line_number:
          type: integer
          description: номер строки в исходном файле
          example: 8246247835237876880
          format: int64
        record:
          type: array
          items:
            type: string
            example: Totam et ut.
          example:
            - Illum exercitationem.
            - Qui molestiae nihil iusto eos qui et.
            - Eos sed adipisci optio.
          minItems: 4
          maxItems: 4
      example:
        line_number: 8931161136447120218
        record:
          - At quod eaque debitis veritatis.
          - Qui optio consequatur facere inventore.
          - Ut eius.
      required:
        - record
        - line_number
    BotsProgress:
      type: object
      properties:
        posts_count:
          type: integer
          description: количество выложенных постов
          example: 5329623086597137214
          format: int64
        status:
          type: integer
          description: текущий статус бота, будут ли выкладываться посты
          example: 8410438612696031835
          format: int64
        user_name:
          type: string
          description: имя пользователя бота
          example: Repellat labore porro.
      example:
        posts_count: 7593620480545554800
        status: 5220630343066200485
        user_name: Neque commodi.
      required:
        - user_name
        - posts_count
        - status
    CreateTaskDraftRequestBody:
      type: object
      properties:
        post_image:
          type: string
          description: фотография для постов
          example: Est vitae ut eveniet.
        text_template:
          type: string
          description: шаблон для подписи под постом
          example: Vel laborum natus dolores voluptatem necessitatibus sed.
        title:
          type: string
          description: название задачи
          example: Eius quis et.
      example:
        post_image: Eveniet molestias cumque dolores laboriosam aut cumque.
        text_template: Voluptatem ea reiciendis ea nihil ut.
        title: Sunt aliquam quibusdam.
      required:
        - title
        - text_template
        - post_image
    Creds:
      type: object
      properties:
        jwt:
          type: string
          description: JWT token
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
      example:
        jwt: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
      required:
        - jwt
    Task:
      type: object
      properties:
        bots_filename:
          type: string
          description: название файла, из которого брали ботов
          example: Et quam earum blanditiis.
        bots_num:
          type: integer
          description: количество ботов в задаче
          example: 4784168656209870443
          format: int64
        id:
          type: string
          example: F25C441B-B3AA-5871-1077-53EACA084D5A
          format: uuid
        image:
          type: string
          description: base64 строка картинки
          example: Alias et culpa consequatur dolores.
        proxies_filename:
          type: string
          description: название файла, из которого брали прокси
          example: Sunt magnam incidunt voluptatibus.
        proxies_num:
          type: integer
          description: количество прокси в задаче
          example: 5788420071222609504
          format: int64
        status:
          type: integer
          example: 7560710796736112312
          format: int64
        targets_filename:
          type: string
          description: название файла, из которого брали целевых пользователей
          example: Non quidem saepe aut saepe.
        targets_num:
          type: integer
          description: количество целевых пользователей в задаче
          example: 6277592296786217485
          format: int64
        text_template:
          type: string
          description: описание под постом
          example: Dolorum odio laborum.
        title:
          type: string
          description: название задачи
          example: Hic in.
      example:
        bots_filename: Et possimus voluptatem assumenda nisi rerum est.
        bots_num: 3827106222681637058
        id: E058AD50-5D7F-E9A8-E010-D33044724992
        image: Quis reprehenderit quis eum ad porro sed.
        proxies_filename: Et omnis dolor quia ea sed quia.
        proxies_num: 3374323904394963977
        status: 6432522886974044070
        targets_filename: Voluptatem quasi qui dolor deleniti.
        targets_num: 2012286125937945496
        text_template: Reiciendis temporibus voluptas rerum explicabo quia numquam.
        title: Nostrum exercitationem error.
      required:
        - id
        - text_template
        - image
        - status
        - title
        - bots_num
        - proxies_num
        - targets_num
    TaskFileNames:
      type: object
      properties:
        bots_filename:
          type: string
          description: название файла, из которого брали ботов
          example: Error voluptas nihil non quasi.
        proxies_filename:
          type: string
          description: название файла, из которого брали прокси
          example: Modi aut qui impedit odio.
        targets_filename:
          type: string
          description: название файла, из которого брали целевых пользователей
          example: Incidunt reiciendis.
      example:
        bots_filename: Aut ullam quis maiores.
        proxies_filename: Fugiat vel nihil occaecati impedit repellat laudantium.
        targets_filename: Culpa veritatis vitae voluptatem labore.
      required:
        - bots_filename
        - proxies_filename
        - targets_filename
    UpdateTaskRequestBody:
      type: object
      properties:
        post_image:
          type: string
          description: фотография для постов
          example: Officiis eos temporibus enim sequi dolorem.
        text_template:
          type: string
          description: шаблон для подписи под постом
          example: Doloribus explicabo in.
        title:
          type: string
          description: название задачи
          example: Debitis voluptas incidunt.
      example:
        post_image: Adipisci praesentium sint.
        text_template: Nobis cumque deleniti accusamus est.
        title: Earum non sequi quos.
    UploadError:
      type: object
      properties:
        input:
          type: string
          description: номер порта
          example: Velit molestiae consequatur occaecati libero.
        line:
          type: integer
          example: 4455161378982152322
          format: int64
        reason:
          type: string
          example: Deserunt rerum ratione iure voluptatibus.
        type:
          type: integer
          description: |2-
             1 - список ботов
                2 - список прокси
                3 - список получателей рекламы
          example: 1
          enum:
            - 1
            - 2
            - 3
      example:
        input: Quasi dolorum et.
        line: 433613707292809257
        reason: Ut vero.
        type: 3
      required:
        - type
        - line
        - input
        - reason
    UploadFilesRequestBody:
      type: object
      properties:
        bots:
          type: array
          items:
            $ref: '#/components/schemas/BotAccountRecord'
          description: список ботов
          example:
            - line_number: 2669733814448064186
              record:
                - Omnis eius atque possimus deleniti.
                - Sunt officia inventore.
                - Et molestiae quam beatae quas eum.
            - line_number: 2669733814448064186
              record:
                - Omnis eius atque possimus deleniti.
                - Sunt officia inventore.
                - Et molestiae quam beatae quas eum.
            - line_number: 2669733814448064186
              record:
                - Omnis eius atque possimus deleniti.
                - Sunt officia inventore.
                - Et molestiae quam beatae quas eum.
        filenames:
          $ref: '#/components/schemas/TaskFileNames'
        proxies:
          type: array
          items:
            $ref: '#/components/schemas/BotAccountRecord'
          description: список проксей для использования
          example:
            - line_number: 2791450974304943083
              record:
                - Repellat ut.
                - Inventore libero et accusantium commodi.
                - Veniam qui.
            - line_number: 2791450974304943083
              record:
                - Repellat ut.
                - Inventore libero et accusantium commodi.
                - Veniam qui.
            - line_number: 2791450974304943083
              record:
                - Repellat ut.
                - Inventore libero et accusantium commodi.
                - Veniam qui.
            - line_number: 2791450974304943083
              record:
                - Repellat ut.
                - Inventore libero et accusantium commodi.
                - Veniam qui.
        targets:
          type: array
          items:
            $ref: '#/components/schemas/BotAccountRecord'
          description: список аккаунтов, которым показать надо рекламу
          example:
            - line_number: 4869887685049312467
              record:
                - Porro sed.
                - Molestiae voluptatem.
            - line_number: 4869887685049312467
              record:
                - Porro sed.
                - Molestiae voluptatem.
      example:
        bots:
          - line_number: 2669733814448064186
            record:
              - Omnis eius atque possimus deleniti.
              - Sunt officia inventore.
              - Et molestiae quam beatae quas eum.
          - line_number: 2669733814448064186
            record:
              - Omnis eius atque possimus deleniti.
              - Sunt officia inventore.
              - Et molestiae quam beatae quas eum.
        filenames:
          bots_filename: Ut quae dolorem similique.
          proxies_filename: Perspiciatis ea autem.
          targets_filename: Odit accusamus officia ipsum.
        proxies:
          - line_number: 2791450974304943083
            record:
              - Repellat ut.
              - Inventore libero et accusantium commodi.
              - Veniam qui.
          - line_number: 2791450974304943083
            record:
              - Repellat ut.
              - Inventore libero et accusantium commodi.
              - Veniam qui.
          - line_number: 2791450974304943083
            record:
              - Repellat ut.
              - Inventore libero et accusantium commodi.
              - Veniam qui.
        targets:
          - line_number: 4869887685049312467
            record:
              - Porro sed.
              - Molestiae voluptatem.
          - line_number: 4869887685049312467
            record:
              - Porro sed.
              - Molestiae voluptatem.
          - line_number: 4869887685049312467
            record:
              - Porro sed.
              - Molestiae voluptatem.
          - line_number: 4869887685049312467
            record:
              - Porro sed.
              - Molestiae voluptatem.
      required:
        - bots
        - proxies
        - targets
        - filenames
  securitySchemes:
    basic_header_Authorization:
      type: http
      description: Basic authentication used to authenticate security principal during signin
      scheme: basic
    jwt_header_Authorization:
      type: http
      description: Secures endpoint by requiring a valid JWT token retrieved via the signin endpoint. Supports scopes "api:read" and "api:write".
      scheme: bearer
tags:
  - name: admin_service
    description: The secured service exposes endpoints that require valid authorization credentials.
  - name: auth_service
    description: The secured service exposes endpoints that require valid authorization credentials.
  - name: tasks_service
    description: сервис для создания, редактирования и работы с задачами (рекламными компаниями)
